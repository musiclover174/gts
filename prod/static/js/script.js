"use strict";window.onload=function(){window.animation={};window.gts={};window.animation.fadeIn=function(elem,ms,cb){if(!elem)return;elem.style.opacity=0;elem.style.display="block";if(ms){var opacity=0;var timer=setInterval(function(){opacity+=50/ms;if(opacity>=1){clearInterval(timer);opacity=1;if(cb)cb()}elem.style.opacity=opacity},50)}else{elem.style.opacity=1;if(cb)cb()}};window.animation.fadeOut=function(elem,ms,cb){if(!elem)return;elem.style.opacity=1;if(ms){var opacity=1;var timer=setInterval(function(){opacity-=50/ms;if(opacity<=0){clearInterval(timer);opacity=0;elem.style.display="none";if(cb)cb()}elem.style.opacity=opacity},50)}else{elem.style.opacity=0;elem.style.display="none";if(cb)cb()}};window.animation.scrollTo=function(to,duration){if(duration<=0)return;var element=document.documentElement,difference=to-element.scrollTop,perTick=difference/duration*10;setTimeout(function(){element.scrollTop=element.scrollTop+perTick;window.animation.scrollTo(to,duration-10)},10)};window.gts.form={maxValInputs:function maxValInputs(){var maxValInputs=document.querySelectorAll(".js-input-maxval");var _loop=function _loop(maxValInput){var plus=maxValInput.nextElementSibling,minus=maxValInput.nextElementSibling.nextElementSibling,max=maxValInput.getAttribute("data-max"),min=maxValInput.getAttribute("data-min");maxValInput.addEventListener("keydown",function(e){var validArr=[46,8,9,27,13,110,190];if(validArr.indexOf(e.keyCode)!==-1||e.keyCode==65&&(e.ctrlKey===true||e.metaKey===true)||e.keyCode==67&&(e.ctrlKey===true||e.metaKey===true)||e.keyCode==88&&(e.ctrlKey===true||e.metaKey===true)||e.keyCode>=35&&e.keyCode<=39){return}if((e.shiftKey||e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105)){e.preventDefault()}});maxValInput.addEventListener("keyup",function(e){if(+maxValInput.value>+max)maxValInput.value=max;if(+maxValInput.value<+min)maxValInput.value=min;var eventChange=new Event("change");maxValInput.dispatchEvent(eventChange)});plus.addEventListener("click",function(){if(+maxValInput.value<+max)maxValInput.value=+maxValInput.value+1;var eventChange=new Event("change");maxValInput.dispatchEvent(eventChange)});minus.addEventListener("click",function(){if(+maxValInput.value>+min)maxValInput.value=+maxValInput.value-1;var eventChange=new Event("change");maxValInput.dispatchEvent(eventChange)})};var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=maxValInputs[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var maxValInput=_step.value;_loop(maxValInput)}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}},init:function init(){var _th=this,inputs=document.querySelectorAll(".common__input, .common__textarea"),forms=document.querySelectorAll("form"),selectors=document.querySelectorAll(".js-select"),choicesArr=[],digitsInput=document.querySelectorAll(".js-digits");$(".js-phone").mask("+7(999) 999-9999");// jquery
inputs.forEach(function(item){item.addEventListener("keyup",emptyCheck);item.addEventListener("blur",emptyCheck)});function emptyCheck(event){event.target.value.trim()===""?event.target.classList.remove("notempty"):event.target.classList.add("notempty")}var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=selectors[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var selector=_step2.value;var choice=new Choices(selector,{searchEnabled:false,itemSelectText:"",position:"bottom"});choicesArr.push(choice)}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return){_iterator2.return()}}finally{if(_didIteratorError2){throw _iteratorError2}}}forms.forEach(function(form){form.addEventListener("submit",function(e){return!_th.checkForm(form)&&e.preventDefault()})});this.maxValInputs();var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=digitsInput[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){var digitInput=_step3.value;digitInput.addEventListener("keydown",function(e){var validArr=[46,8,9,27,13,110,190];if(validArr.indexOf(e.keyCode)!==-1||e.keyCode==65&&(e.ctrlKey===true||e.metaKey===true)||e.keyCode==67&&(e.ctrlKey===true||e.metaKey===true)||e.keyCode==88&&(e.ctrlKey===true||e.metaKey===true)||e.keyCode>=35&&e.keyCode<=39){return}if((e.shiftKey||e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105)){e.preventDefault()}})}}catch(err){_didIteratorError3=true;_iteratorError3=err}finally{try{if(!_iteratorNormalCompletion3&&_iterator3.return){_iterator3.return()}}finally{if(_didIteratorError3){throw _iteratorError3}}}return this},checkForm:function checkForm(form){var checkResult=true;var warningElems=form.querySelectorAll(".warning");if(warningElems.length)warningElems.forEach(function(warningElem){return warningElem.classList.remove("warning")});form.querySelectorAll("input, textarea, select").forEach(function(elem){if(elem.getAttribute("data-req")){switch(elem.getAttribute("data-type")){case"tel":var re=/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/im;if(!re.test(elem.value)){elem.classList.add("warning");checkResult=false}break;case"email":var re=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;if(!re.test(elem.value)){elem.classList.add("warning");checkResult=false}break;default:if(elem.value.trim()===""){elem.classList.add("warning");checkResult=false}break;}}});form.querySelectorAll("input[name^=agreement]").forEach(function(item){if(!item.checked){item.classList.add("warning");checkResult=false}});return checkResult}}.init();window.gts.main={prevAll:function prevAll(elem){var result=[];while(elem=elem.previousElementSibling){result.push(elem)}return result},cardHeight:function cardHeight(){var cardInfo=document.querySelectorAll(".card__list .card__elem-info"),cardParent=document.querySelector(".card__list"),elemsOnRow=void 0,maxH=void 0;function skippedAutoHeight(){document.querySelectorAll(".card__elem-info.skipped").forEach(function(elem){elem.style.height=maxH+"px";elem.classList.remove("skipped")});maxH=0}function autoHeight(){maxH=0;cardInfo.forEach(function(item,i){if(i%elemsOnRow===0)skippedAutoHeight();if(item.offsetHeight>maxH){maxH=item.offsetHeight}item.classList.add("skipped")});if(document.querySelectorAll(".card__elem-info.skipped").length)skippedAutoHeight()}window.addEventListener("resize",function(){cardInfo.forEach(function(elem){return elem.style.height="auto"});elemsOnRow=Math.floor(cardParent.offsetWidth/cardInfo[0].offsetWidth);autoHeight()})},page404:function page404(){var sidebar=new StickySidebar(".js-page404-sticky",{containerSelector:".page404",innerWrapperSelector:".page404__sideover",topSpacing:document.querySelector(".header").offsetHeight+20,bottomSpacing:0})},search:function search(){var search=document.querySelector(".search"),searchIcon=document.querySelector(".js-search-icon"),searchClose=document.querySelector(".js-search-close"),searchInp=document.querySelector(".search__inp"),searchRes=document.querySelector(".js-search-res"),html=document.querySelector("html");searchIcon.addEventListener("click",function(e){search.classList.add("open");html.classList.add("burgeropen");e.preventDefault();e.stopPropagation()});searchClose.addEventListener("click",function(e){searchInp.value="";searchRes.classList.remove("open");search.classList.remove("open");html.classList.remove("burgeropen");e.preventDefault();e.stopPropagation()});searchInp.addEventListener("keyup",function(e){if(searchInp.value.trim()!=="")searchRes.classList.add("open");else searchRes.classList.remove("open")})},burger:function burger(){var burger=document.querySelector(".js-burger"),burgerShadow=document.querySelector(".js-burger-shadow");burger.addEventListener("click",function(e){document.querySelector(".burger__menu").classList.toggle("open");this.classList.toggle("open");document.querySelector("html").classList.toggle("burgeropen");e.preventDefault();e.stopPropagation()});burgerShadow.addEventListener("click",function(e){var event=new Event("click");burger.dispatchEvent(event);e.preventDefault();e.stopPropagation()})},bannerCar:function bannerCar(){var bannerSwiper=new Swiper(".js-ibanner",{loop:true,speed:1800,effect:"fade",navigation:{nextEl:".js-ibanner .swiper-button-next",prevEl:".js-ibanner .swiper-button-prev"},fadeEffect:{crossFade:true},autoplay:{delay:5000}})},reviewsCar:function reviewsCar(){var reviewsSwiper=new Swiper(".js-ireviews",{loop:true,speed:800,navigation:{nextEl:".js-ireviews ~ .swiper-buttons .swiper-button-next",prevEl:".js-ireviews ~ .swiper-buttons .swiper-button-prev"},effect:"fade",autoHeight:true,fadeEffect:{crossFade:true},autoplay:{delay:5000}})},clientsCar:function clientsCar(){var projectsSwiper=new Swiper(".js-iclients",{loop:true,speed:800,slidesPerView:5,spaceBetween:26,navigation:{nextEl:".js-iclients ~ .swiper-buttons .swiper-button-next",prevEl:".js-iclients ~ .swiper-buttons .swiper-button-prev"},breakpoints:{700:{slidesPerView:2,spaceBetween:20},999:{slidesPerView:4,spaceBetween:20}}})},recentCar:function recentCar(){var projectsSwipers=document.querySelectorAll(".js-recent");var _iteratorNormalCompletion4=true;var _didIteratorError4=false;var _iteratorError4=undefined;try{for(var _iterator4=projectsSwipers[Symbol.iterator](),_step4;!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=true){var projectsSwiper=_step4.value;projectsSwiper=new Swiper(".js-recent",{loop:false,speed:800,slidesPerView:3,spaceBetween:32,navigation:{nextEl:".js-recent ~ .swiper-buttons .swiper-button-next",prevEl:".js-recent ~ .swiper-buttons .swiper-button-prev"},breakpoints:{767:{slidesPerView:1,spaceBetween:10},1199:{slidesPerView:2,spaceBetween:20}}})}}catch(err){_didIteratorError4=true;_iteratorError4=err}finally{try{if(!_iteratorNormalCompletion4&&_iterator4.return){_iterator4.return()}}finally{if(_didIteratorError4){throw _iteratorError4}}}var cardInfo=document.querySelectorAll(".js-recent .card__elem-info"),maxH=0;function autoHeight(){cardInfo.forEach(function(elem){return elem.style.height="auto"});cardInfo.forEach(function(item,i){if(item.offsetHeight>maxH){maxH=item.offsetHeight}});cardInfo.forEach(function(elem){return elem.style.height=maxH+"px"})}window.addEventListener("resize",function(){autoHeight()})},projectsCar:function projectsCar(){var projectsSwiper=new Swiper(".js-iprojects",{loop:true,speed:800,slidesPerView:3,spaceBetween:32,navigation:{nextEl:".js-iprojects ~ .swiper-buttons .swiper-button-next",prevEl:".js-iprojects ~ .swiper-buttons .swiper-button-prev"},breakpoints:{600:{slidesPerView:1,spaceBetween:10},999:{slidesPerView:2,spaceBetween:20}}})},inewsToggler:function inewsToggler(){document.querySelectorAll(".js-inews-href").forEach(function(item,i){item.addEventListener("click",function(e){if(item.classList.contains("active"))return false;var curActive=document.querySelector(".js-inews-href.active"),curAttr=curActive.getAttribute("data-type"),newAttr=item.getAttribute("data-type");curActive.classList.remove("active");item.classList.add("active");var fadeOutElem=document.querySelector(".i-news__type[data-type=\""+curAttr+"\"]"),fadeInElem=document.querySelector(".i-news__type[data-type=\""+newAttr+"\"]");window.animation.fadeOut(fadeOutElem,400,function(){window.animation.fadeIn(fadeInElem,400)});e.stopPropagation();e.preventDefault()})})},resizeWatcher:function resizeWatcher(){var tableSel=document.querySelectorAll("table"),scrollArray=[];if(tableSel.length){tableSel.forEach(function(item,i){var orgHtml=item.outerHTML,def="default";if(item.getAttribute("class"))def="";item.outerHTML="<div class='table-scroller"+i+" "+def+"'>"+orgHtml+"</div>";var ps=new PerfectScrollbar(".table-scroller"+i,{wheelPropagation:true});scrollArray.push(ps)});window.addEventListener("resize",function(){if(scrollArray.length)scrollArray.forEach(function(item,i){item.update()})})}},services:function services(){var servCost=document.querySelector(".js-serv-cost"),servSticky=document.querySelector(".js-serv-sticky"),carElem=document.querySelectorAll(".js-serv-img"),mainImg=document.querySelector(".js-device-main"),mainOver=document.querySelector(".js-device-mainover");function calc(){var inputs=document.querySelectorAll(".services__variants-table tr.choosed .services__variants-checkbox"),totalSumm=0;inputs.forEach(function(item){totalSumm+=parseFloat(item.getAttribute("data-cost").replace(/[,]+/g,"."))});servCost.textContent=totalSumm.toLocaleString("ru")}document.querySelector("body").addEventListener("click",function(e){var item=e.target;if(item.classList.contains("js-serv-checkbox")){if(item.classList.contains("clicked"))item.querySelector("input").removeAttribute("checked");else item.querySelector("input").setAttribute("checked",true);item.classList.toggle("clicked");item.parentNode.parentNode.classList.toggle("choosed");calc()}});var sidebar=new StickySidebar(".js-serv-sticky",{containerSelector:".services__content",innerWrapperSelector:".services__cost-sticky",topSpacing:document.querySelector(".header").offsetHeight+20,bottomSpacing:0});window.addEventListener("resize",function(){sidebar.updateSticky()});var gallerySwiper=new Swiper(".js-serv-car",{loop:false,speed:800,slidesPerView:6,spaceBetween:18,navigation:{nextEl:".js-serv-car ~ .swiper-button-next",prevEl:".js-serv-car ~ .swiper-button-prev"},breakpoints:{479:{slidesPerView:2,spaceBetween:10},700:{slidesPerView:3,spaceBetween:18},1199:{slidesPerView:5,spaceBetween:18}}});var _loop2=function _loop2(item){item.addEventListener("click",function(){if(!item.classList.contains("active")){var _iteratorNormalCompletion6=true;var _didIteratorError6=false;var _iteratorError6=undefined;try{for(var _iterator6=carElem[Symbol.iterator](),_step6;!(_iteratorNormalCompletion6=(_step6=_iterator6.next()).done);_iteratorNormalCompletion6=true){var _item=_step6.value;_item.classList.remove("active")}}catch(err){_didIteratorError6=true;_iteratorError6=err}finally{try{if(!_iteratorNormalCompletion6&&_iterator6.return){_iterator6.return()}}finally{if(_didIteratorError6){throw _iteratorError6}}}item.classList.add("active");var imgOriginal=item.querySelector("img").getAttribute("data-original"),imgIndex=item.querySelector("img").getAttribute("data-index");mainImg.setAttribute("data-index",imgIndex);mainImg.src=imgOriginal}})};var _iteratorNormalCompletion5=true;var _didIteratorError5=false;var _iteratorError5=undefined;try{for(var _iterator5=carElem[Symbol.iterator](),_step5;!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=true){var item=_step5.value;_loop2(item)}}catch(err){_didIteratorError5=true;_iteratorError5=err}finally{try{if(!_iteratorNormalCompletion5&&_iterator5.return){_iterator5.return()}}finally{if(_didIteratorError5){throw _iteratorError5}}}var servLightbox=GLightbox({"selector":"services__device-glightbox"});mainOver.addEventListener("click",function(){var eventClick=new Event("click"),lightImgs=document.querySelectorAll(".services__device-glightbox"),index=parseInt(mainImg.getAttribute("data-index"))-1;lightImgs[index].dispatchEvent(eventClick)})},comparison:function comparison(){var diffsBut=document.querySelector(".js-comparison-diffs"),allBut=document.querySelector(".js-comparison-all"),paramsInfo=document.querySelectorAll(".comparison__elem-params"),fixers=document.querySelectorAll(".js-comparison-fixer");var comparisonSwiper=new Swiper(".js-comparison-car",{loop:false,speed:800,slidesPerView:4,spaceBetween:30,navigation:{nextEl:".js-comparison-car ~ .swiper-buttons .swiper-button-next",prevEl:".js-comparison-car ~ .swiper-buttons .swiper-button-prev"},breakpoints:{600:{slidesPerView:1,spaceBetween:10},999:{slidesPerView:2,spaceBetween:20},1200:{slidesPerView:3,spaceBetween:30}}});var comparisonHrefs=document.querySelectorAll(".js-comparison-shaver");window.addEventListener("scroll",function(){var fixers=document.querySelectorAll(".js-comparison-fixer"),header=document.querySelector(".header"),diff=fixers[0].parentNode.getBoundingClientRect().top-header.offsetHeight,btnHeight=document.querySelector(".comparison__elem-tocart").offsetHeight+parseInt(getComputedStyle(document.querySelector(".comparison__elem-tocart")).marginTop)/2,fixerHeight=fixers[0].offsetHeight,mainHeight=fixers[0].parentNode.parentNode.offsetHeight-btnHeight,scrollFixed=0;if(diff<20){scrollFixed=Math.abs(diff)+20}if(Math.abs(diff)+20+fixerHeight<mainHeight){fixers.forEach(function(fixer){if(scrollFixed){fixer.parentNode.style.height=fixerHeight+"px";fixer.style.top=scrollFixed+"px";fixer.classList.add("fixed")}else{fixer.parentNode.removeAttribute("style");fixer.removeAttribute("style");fixer.classList.remove("fixed")}})}});var _iteratorNormalCompletion7=true;var _didIteratorError7=false;var _iteratorError7=undefined;try{for(var _iterator7=comparisonHrefs[Symbol.iterator](),_step7;!(_iteratorNormalCompletion7=(_step7=_iterator7.next()).done);_iteratorNormalCompletion7=true){var comparisonHref=_step7.value;shave(comparisonHref,50)}}catch(err){_didIteratorError7=true;_iteratorError7=err}finally{try{if(!_iteratorNormalCompletion7&&_iterator7.return){_iterator7.return()}}finally{if(_didIteratorError7){throw _iteratorError7}}}allBut.addEventListener("click",function(e){e.preventDefault();var _iteratorNormalCompletion8=true;var _didIteratorError8=false;var _iteratorError8=undefined;try{for(var _iterator8=paramsInfo[Symbol.iterator](),_step8;!(_iteratorNormalCompletion8=(_step8=_iterator8.next()).done);_iteratorNormalCompletion8=true){var paramInfo=_step8.value;paramInfo.querySelectorAll(".hidden").forEach(function(item){return item.classList.remove("item")})}}catch(err){_didIteratorError8=true;_iteratorError8=err}finally{try{if(!_iteratorNormalCompletion8&&_iterator8.return){_iterator8.return()}}finally{if(_didIteratorError8){throw _iteratorError8}}}});diffsBut.addEventListener("click",function(e){e.preventDefault();if(diffsBut.classList.contains("active"))return;diffsBut.classList.add("active");allBut.classList.remove("active");var _loop3=function _loop3(i){var defaultVal=paramsInfo[0].querySelectorAll(".comparison__elem-params-row")[i].querySelector(".comparison__elem-params-val").textContent,haveDiff=false;paramsInfo.forEach(function(paramElem,index){if(index&&!haveDiff&&paramElem.querySelectorAll(".comparison__elem-params-row")[i].querySelector(".comparison__elem-params-val").textContent!==defaultVal){haveDiff=!haveDiff}});if(!haveDiff){var _iteratorNormalCompletion9=true;var _didIteratorError9=false;var _iteratorError9=undefined;try{for(var _iterator9=paramsInfo[Symbol.iterator](),_step9;!(_iteratorNormalCompletion9=(_step9=_iterator9.next()).done);_iteratorNormalCompletion9=true){var paramElem=_step9.value;paramElem.querySelectorAll(".comparison__elem-params-row")[i].classList.add("hidden")}}catch(err){_didIteratorError9=true;_iteratorError9=err}finally{try{if(!_iteratorNormalCompletion9&&_iterator9.return){_iterator9.return()}}finally{if(_didIteratorError9){throw _iteratorError9}}}}};for(var i=0;i<paramsInfo[0].querySelectorAll(".comparison__elem-params-row").length;i++){_loop3(i)}});allBut.addEventListener("click",function(e){e.preventDefault();if(allBut.classList.contains("active"))return;diffsBut.classList.remove("active");allBut.classList.add("active");var _iteratorNormalCompletion10=true;var _didIteratorError10=false;var _iteratorError10=undefined;try{for(var _iterator10=paramsInfo[Symbol.iterator](),_step10;!(_iteratorNormalCompletion10=(_step10=_iterator10.next()).done);_iteratorNormalCompletion10=true){var paramInfo=_step10.value;paramInfo.querySelectorAll(".hidden").forEach(function(item){return item.classList.remove("hidden")})}}catch(err){_didIteratorError10=true;_iteratorError10=err}finally{try{if(!_iteratorNormalCompletion10&&_iterator10.return){_iterator10.return()}}finally{if(_didIteratorError10){throw _iteratorError10}}}})},cardPage:function cardPage(){var sidebar=new StickySidebar(".js-card-sticky",{containerSelector:".card__main",innerWrapperSelector:".card__info-sticky",topSpacing:document.querySelector(".header").offsetHeight+20,bottomSpacing:0});var paramsShower=document.querySelector(".js-card-params"),paramsHidden=document.querySelector(".card__params-hidden");paramsShower.addEventListener("click",function(e){paramsHidden.classList.toggle("show");paramsShower.classList.toggle("open");e.preventDefault()});window.addEventListener("resize",function(){sidebar.updateSticky()});var gallerySwiper=new Swiper(".js-serv-car",{loop:false,speed:800,slidesPerView:4,spaceBetween:10,navigation:{nextEl:".js-serv-car ~ .swiper-button-next",prevEl:".js-serv-car ~ .swiper-button-prev"},breakpoints:{479:{slidesPerView:2,spaceBetween:10},700:{slidesPerView:2,spaceBetween:10},1199:{slidesPerView:3,spaceBetween:10}}});var mscCheckbox=document.querySelector(".card__info-msc"),mscCheckboxInp=document.querySelector(".card__info-msc input");mscCheckbox.addEventListener("click",function(e){mscCheckbox.classList.toggle("checked");if(mscCheckbox.classList.contains("checked"))mscCheckboxInp.setAttribute("checked",true);else mscCheckboxInp.removeAttribute("checked");var eventChange=new Event("change");mscCheckboxInp.dispatchEvent(eventChange);e.preventDefault()});var carElem=document.querySelectorAll(".js-serv-img"),mainImg=document.querySelector(".js-device-main"),mainOver=document.querySelector(".js-device-mainover");var _loop4=function _loop4(item){item.addEventListener("click",function(){if(!item.classList.contains("active")){var _iteratorNormalCompletion14=true;var _didIteratorError14=false;var _iteratorError14=undefined;try{for(var _iterator14=carElem[Symbol.iterator](),_step14;!(_iteratorNormalCompletion14=(_step14=_iterator14.next()).done);_iteratorNormalCompletion14=true){var _item2=_step14.value;_item2.classList.remove("active")}}catch(err){_didIteratorError14=true;_iteratorError14=err}finally{try{if(!_iteratorNormalCompletion14&&_iterator14.return){_iterator14.return()}}finally{if(_didIteratorError14){throw _iteratorError14}}}item.classList.add("active");var imgOriginal=item.querySelector("img").getAttribute("data-original"),imgIndex=item.querySelector("img").getAttribute("data-index");mainImg.setAttribute("data-index",imgIndex);mainImg.src=imgOriginal}})};var _iteratorNormalCompletion11=true;var _didIteratorError11=false;var _iteratorError11=undefined;try{for(var _iterator11=carElem[Symbol.iterator](),_step11;!(_iteratorNormalCompletion11=(_step11=_iterator11.next()).done);_iteratorNormalCompletion11=true){var item=_step11.value;_loop4(item)}}catch(err){_didIteratorError11=true;_iteratorError11=err}finally{try{if(!_iteratorNormalCompletion11&&_iterator11.return){_iterator11.return()}}finally{if(_didIteratorError11){throw _iteratorError11}}}var servLightbox=GLightbox({"selector":"card__main-glightbox"});mainOver.addEventListener("click",function(){var eventClick=new Event("click"),lightImgs=document.querySelectorAll(".card__main-glightbox"),index=parseInt(mainImg.getAttribute("data-index"))-1;lightImgs[index].dispatchEvent(eventClick)});var cardFilters=document.querySelectorAll(".associated__filter");var filterFunction=function filterFunction(costMin,costMax,load,elems){var _iteratorNormalCompletion12=true;var _didIteratorError12=false;var _iteratorError12=undefined;try{for(var _iterator12=elems[Symbol.iterator](),_step12;!(_iteratorNormalCompletion12=(_step12=_iterator12.next()).done);_iteratorNormalCompletion12=true){var elem=_step12.value;var elemCost=elem.getAttribute("data-cost").replace(/\s+/g,""),elemLoad=elem.getAttribute("data-load").replace(/\s+/g,"");if(+elemCost<+costMin||+elemCost>+costMax||+elemLoad<+load)elem.classList.add("filtered");else elem.classList.remove("filtered")}}catch(err){_didIteratorError12=true;_iteratorError12=err}finally{try{if(!_iteratorNormalCompletion12&&_iterator12.return){_iterator12.return()}}finally{if(_didIteratorError12){throw _iteratorError12}}}};var _loop5=function _loop5(cardFilter){var costMin=cardFilter.querySelector(".js-assoc-filter-min"),costMax=cardFilter.querySelector(".js-assoc-filter-max"),load=cardFilter.querySelector(".js-assoc-filter-load"),elems=cardFilter.nextElementSibling.querySelectorAll(".card__elem");filterFunction(costMin.value,costMax.value,load.value,elems);costMin.addEventListener("keyup",function(){filterFunction(costMin.value,costMax.value,load.value,elems)},false);costMax.addEventListener("keyup",function(){filterFunction(costMin.value,costMax.value,load.value,elems)},false);load.addEventListener("keyup",function(){filterFunction(costMin.value,costMax.value,load.value,elems)},false)};var _iteratorNormalCompletion13=true;var _didIteratorError13=false;var _iteratorError13=undefined;try{for(var _iterator13=cardFilters[Symbol.iterator](),_step13;!(_iteratorNormalCompletion13=(_step13=_iterator13.next()).done);_iteratorNormalCompletion13=true){var cardFilter=_step13.value;_loop5(cardFilter)}}catch(err){_didIteratorError13=true;_iteratorError13=err}finally{try{if(!_iteratorNormalCompletion13&&_iterator13.return){_iterator13.return()}}finally{if(_didIteratorError13){throw _iteratorError13}}}},equipment:function equipment(){var equipmentSwiper=new Swiper(".js-equipment",{loop:true,speed:800,slidesPerView:3,spaceBetween:40,navigation:{nextEl:".js-equipment ~ .swiper-buttons .swiper-button-next",prevEl:".js-equipment ~ .swiper-buttons .swiper-button-prev"},breakpoints:{767:{slidesPerView:1,spaceBetween:10},999:{slidesPerView:2,spaceBetween:10},1199:{slidesPerView:3,spaceBetween:20}}})},others:function others(){var othersHref=document.querySelectorAll(".js-others-shaver");var _iteratorNormalCompletion15=true;var _didIteratorError15=false;var _iteratorError15=undefined;try{for(var _iterator15=othersHref[Symbol.iterator](),_step15;!(_iteratorNormalCompletion15=(_step15=_iterator15.next()).done);_iteratorNormalCompletion15=true){var otherHref=_step15.value;shave(otherHref,40)}}catch(err){_didIteratorError15=true;_iteratorError15=err}finally{try{if(!_iteratorNormalCompletion15&&_iterator15.return){_iterator15.return()}}finally{if(_didIteratorError15){throw _iteratorError15}}}var equipmentSwiper=new Swiper(".js-others",{loop:true,speed:800,slidesPerView:4,spaceBetween:30,navigation:{nextEl:".js-others ~ .swiper-buttons .swiper-button-next",prevEl:".js-others ~ .swiper-buttons .swiper-button-prev"},breakpoints:{767:{slidesPerView:1,spaceBetween:10},1199:{slidesPerView:3,spaceBetween:20}}})},consult:function consult(){var sidebarReviews=false;var sidebarQuestion=new StickySidebar(".js-consult-question-sticky",{containerSelector:".consult__question-sticky",innerWrapperSelector:".consult__person",topSpacing:document.querySelector(".header").offsetHeight+20,bottomSpacing:0});if(document.querySelectorAll(".js-consult-reviews-sticky").length){sidebarReviews=new StickySidebar(".js-consult-reviews-sticky",{containerSelector:".consult__reviews-sticky",innerWrapperSelector:".consult__makerev",topSpacing:document.querySelector(".header").offsetHeight+20,bottomSpacing:0})}document.querySelectorAll(".js-consult-tab").forEach(function(item,i){item.addEventListener("click",function(e){if(item.classList.contains("active"))return false;var curActive=document.querySelector(".js-consult-tab.active"),curAttr=curActive.getAttribute("data-type"),newAttr=item.getAttribute("data-type");curActive.classList.remove("active");item.classList.add("active");var fadeOutElem=document.querySelector(".consult__block[data-type=\""+curAttr+"\"]"),fadeInElem=document.querySelector(".consult__block[data-type=\""+newAttr+"\"]");window.animation.fadeOut(fadeOutElem,400,function(){window.animation.fadeIn(fadeInElem,400,function(){sidebarQuestion.updateSticky();sidebarReviews.updateSticky()})});e.stopPropagation();e.preventDefault()})});document.querySelectorAll(".js-consult-question").forEach(function(item,i){item.addEventListener("click",function(e){if(item.classList.contains("active"))return false;var curActive=document.querySelector(".js-consult-question.active"),curAttr=curActive.getAttribute("data-type"),newAttr=item.getAttribute("data-type");curActive.classList.remove("active");item.classList.add("active");var fadeOutElem=document.querySelector(".consult__question-list-tab[data-type=\""+curAttr+"\"]"),fadeInElem=document.querySelector(".consult__question-list-tab[data-type=\""+newAttr+"\"]");window.animation.fadeOut(fadeOutElem,200,function(){window.animation.fadeIn(fadeInElem,200,function(){sidebarQuestion.updateSticky()})});e.stopPropagation();e.preventDefault()})});window.addEventListener("resize",function(){sidebarQuestion.updateSticky();if(sidebarReviews)sidebarReviews.updateSticky()})},stillage:function stillage(){function updatePopupData(){var checks=document.querySelectorAll(".complex__calc-checkbox.checked"),popList=document.querySelector("ol[data-cats]");if(checks.length){popList.innerHTML="";var _iteratorNormalCompletion16=true;var _didIteratorError16=false;var _iteratorError16=undefined;try{for(var _iterator16=checks[Symbol.iterator](),_step16;!(_iteratorNormalCompletion16=(_step16=_iterator16.next()).done);_iteratorNormalCompletion16=true){var check=_step16.value;var item=document.createElement("li");item.textContent=check.getAttribute("data-value");popList.appendChild(item)}}catch(err){_didIteratorError16=true;_iteratorError16=err}finally{try{if(!_iteratorNormalCompletion16&&_iterator16.return){_iterator16.return()}}finally{if(_didIteratorError16){throw _iteratorError16}}}popList.removeAttribute("class")}else{popList.classList.add("hidden")}}var equipmentSwiper=new Swiper(".js-stillage-banner",{loop:true,speed:800,slidesPerView:1,spaceBetween:0,autoHeight:true,navigation:{nextEl:".js-stillage-banner ~ .swiper-buttons .swiper-button-next",prevEl:".js-stillage-banner ~ .swiper-buttons .swiper-button-prev"}});var complexCheckbox=document.querySelectorAll(".js-complex-check");var _loop6=function _loop6(checkbox){checkbox.addEventListener("click",function(e){checkbox.classList.toggle("checked");var trueCheck=checkbox.querySelector(".comlex__calc-checktrue");if(checkbox.classList.contains("checked"))trueCheck.setAttribute("checked",true);else trueCheck.removeAttribute("checked");updatePopupData();e.preventDefault()})};var _iteratorNormalCompletion17=true;var _didIteratorError17=false;var _iteratorError17=undefined;try{for(var _iterator17=complexCheckbox[Symbol.iterator](),_step17;!(_iteratorNormalCompletion17=(_step17=_iterator17.next()).done);_iteratorNormalCompletion17=true){var checkbox=_step17.value;_loop6(checkbox)}}catch(err){_didIteratorError17=true;_iteratorError17=err}finally{try{if(!_iteratorNormalCompletion17&&_iterator17.return){_iterator17.return()}}finally{if(_didIteratorError17){throw _iteratorError17}}}var _iteratorNormalCompletion18=true;var _didIteratorError18=false;var _iteratorError18=undefined;try{for(var _iterator18=document.querySelectorAll(".js-complex-title-shave")[Symbol.iterator](),_step18;!(_iteratorNormalCompletion18=(_step18=_iterator18.next()).done);_iteratorNormalCompletion18=true){var shaverEl=_step18.value;shave(shaverEl,57)}}catch(err){_didIteratorError18=true;_iteratorError18=err}finally{try{if(!_iteratorNormalCompletion18&&_iterator18.return){_iterator18.return()}}finally{if(_didIteratorError18){throw _iteratorError18}}}var _iteratorNormalCompletion19=true;var _didIteratorError19=false;var _iteratorError19=undefined;try{for(var _iterator19=document.querySelectorAll(".stillage__type-text")[Symbol.iterator](),_step19;!(_iteratorNormalCompletion19=(_step19=_iterator19.next()).done);_iteratorNormalCompletion19=true){var _shaverEl=_step19.value;shave(_shaverEl,200)}}catch(err){_didIteratorError19=true;_iteratorError19=err}finally{try{if(!_iteratorNormalCompletion19&&_iterator19.return){_iterator19.return()}}finally{if(_didIteratorError19){throw _iteratorError19}}}},subcatPage:function subcatPage(){var elemSwiper=new Swiper(".js-catalog-car",{loop:true,speed:800,slidesPerView:1,navigation:{nextEl:".js-catalog-car ~ .swiper-button-next",prevEl:".js-catalog-car ~ .swiper-button-prev"}});var catLightbox=GLightbox({"selector":"catalog__elem-glightbox"});var slideCat=document.querySelectorAll(".js-catalog-car .swiper-slide");if(slideCat.length){slideCat.forEach(function(item){item.addEventListener("click",function(){var eventClick=new Event("click"),lightImgs=document.querySelectorAll(".catalog__elem-glightbox"),index=parseInt(item.getAttribute("data-index"));lightImgs[index].dispatchEvent(eventClick)})})}var subcatRange=document.querySelector(".js-subcat-range"),subcatRangeMax=subcatRange.getAttribute("data-max"),subcatRangeMin=subcatRange.getAttribute("data-min");var rangeMin=document.querySelector(".js-subcat-rangeMin"),rangeMax=document.querySelector(".js-subcat-rangeMax"),rangeData=void 0;function updateRange(){if(rangeMin.value>rangeMax.value){;var _ref=[rangeMax.value,rangeMin.value];rangeMin.value=_ref[0];rangeMax.value=_ref[1]}if(rangeMin.value<subcatRangeMin)rangeMin.value=subcatRangeMin;if(rangeMax.value>subcatRangeMax)rangeMax.value=subcatRangeMax;rangeData.update({from:rangeMin.value,to:rangeMax.value})}$(".js-subcat-range").ionRangeSlider({onFinish:function onFinish(data){var eventChange1=new Event("change"),eventChange2=new Event("change");rangeMin.value=data.from;rangeMax.value=data.to;rangeMin.dispatchEvent(eventChange1);rangeMax.dispatchEvent(eventChange2)}});rangeData=$(".js-subcat-range").data("ionRangeSlider");// jquery 
rangeMin.addEventListener("change",updateRange);rangeMax.addEventListener("change",updateRange);var mscCheckboxs=document.querySelectorAll(".js-subcat-check");var _loop7=function _loop7(mscCheckbox){var mscCheckboxInp=mscCheckbox.querySelector("input");mscCheckbox.addEventListener("click",function(e){mscCheckbox.classList.toggle("checked");if(mscCheckbox.classList.contains("checked"))mscCheckboxInp.setAttribute("checked",true);else mscCheckboxInp.removeAttribute("checked");var eventChange=new Event("change");mscCheckboxInp.dispatchEvent(eventChange);e.preventDefault()})};var _iteratorNormalCompletion20=true;var _didIteratorError20=false;var _iteratorError20=undefined;try{for(var _iterator20=mscCheckboxs[Symbol.iterator](),_step20;!(_iteratorNormalCompletion20=(_step20=_iterator20.next()).done);_iteratorNormalCompletion20=true){var mscCheckbox=_step20.value;_loop7(mscCheckbox)}}catch(err){_didIteratorError20=true;_iteratorError20=err}finally{try{if(!_iteratorNormalCompletion20&&_iterator20.return){_iterator20.return()}}finally{if(_didIteratorError20){throw _iteratorError20}}}$(document).on("click",".js-subcat-hidden",function(){$(this).toggleClass("open");$(".js-subcat-table .hidden").fadeToggle(400);return false});tippy(".js-subcatpage",{target:".js-calc-tocart.added",placement:"top",maxWidth:"193px",theme:"light",arrow:true})},modelBlock:function modelBlock(){var modelRange=document.querySelector(".js-model-range"),modelRangeMax=modelRange.getAttribute("data-max"),modelRangeMin=modelRange.getAttribute("data-min");var rangeMin=document.querySelector(".js-model-rangeMin"),rangeMax=document.querySelector(".js-model-rangeMax"),rangeData=void 0;$(".js-model-range").each(function(count,item){var modelRange=$(item),modelRangeMax=$(item).data("max"),modelRangeMin=$(item).data("min"),rangeMin=$(item).parent().parent().find(".js-model-rangeMin")[0],rangeMax=$(item).parent().parent().find(".js-model-rangeMax")[0],rangeData=void 0;function updateRange(){if(rangeMin.value>rangeMax.value){;var _ref2=[rangeMax.value,rangeMin.value];rangeMin.value=_ref2[0];rangeMax.value=_ref2[1]}if(rangeMin.value<modelRangeMin)rangeMin.value=modelRangeMin;if(rangeMax.value>modelRangeMax)rangeMax.value=modelRangeMax;rangeData.update({from:rangeMin.value,to:rangeMax.value})}$(item).ionRangeSlider({onFinish:function onFinish(data){var eventChange1=new Event("change"),eventChange2=new Event("change");rangeMin.value=data.from;rangeMax.value=data.to;rangeMin.dispatchEvent(eventChange1);rangeMax.dispatchEvent(eventChange2)}});rangeData=$(item).data("ionRangeSlider");// jquery 
rangeMin.addEventListener("change",updateRange);rangeMax.addEventListener("change",updateRange)});var openModel=document.querySelector(".js-model-open"),openModelHidden=document.querySelector(".js-model-hidden");openModel.addEventListener("click",function(){openModel.classList.toggle("open");openModelHidden.classList.toggle("open")});var modelCancel=document.querySelector(".js-model-cancel");modelCancel.addEventListener("click",function(e){document.querySelectorAll(".js-model-check input").forEach(function(item){item.removeAttribute("checked");item.parentNode.classList.remove("checked")});e.preventDefault()});var mscCheckboxs=document.querySelectorAll(".js-model-check");var _loop8=function _loop8(mscCheckbox){var mscCheckboxInp=mscCheckbox.querySelector("input");mscCheckbox.addEventListener("click",function(e){mscCheckbox.classList.toggle("checked");if(mscCheckbox.classList.contains("checked"))mscCheckboxInp.setAttribute("checked",true);else mscCheckboxInp.removeAttribute("checked");var eventChange=new Event("change");mscCheckboxInp.dispatchEvent(eventChange);e.preventDefault()})};var _iteratorNormalCompletion21=true;var _didIteratorError21=false;var _iteratorError21=undefined;try{for(var _iterator21=mscCheckboxs[Symbol.iterator](),_step21;!(_iteratorNormalCompletion21=(_step21=_iterator21.next()).done);_iteratorNormalCompletion21=true){var mscCheckbox=_step21.value;_loop8(mscCheckbox)}}catch(err){_didIteratorError21=true;_iteratorError21=err}finally{try{if(!_iteratorNormalCompletion21&&_iterator21.return){_iterator21.return()}}finally{if(_didIteratorError21){throw _iteratorError21}}}},catPage:function catPage(){var elemSwiper=new Swiper(".js-catalog-car",{loop:true,speed:800,slidesPerView:1,navigation:{nextEl:".js-catalog-car ~ .swiper-button-next",prevEl:".js-catalog-car ~ .swiper-button-prev"}});var modSwiper=new Swiper(".js-catalog-mod",{loop:true,speed:800,slidesPerView:2,spaceBetween:30,navigation:{nextEl:".js-catalog-mod ~ .swiper-button-next",prevEl:".js-catalog-mod ~ .swiper-button-prev"},breakpoints:{600:{slidesPerView:1,spaceBetween:0},999:{slidesPerView:2,spaceBetween:15},1200:{slidesPerView:1}}});var catLightbox=GLightbox({"selector":"catalog__elem-glightbox"});var slideCat=document.querySelectorAll(".js-catalog-car .swiper-slide");if(slideCat.length){slideCat.forEach(function(item){item.addEventListener("click",function(){var eventClick=new Event("click"),lightImgs=document.querySelectorAll(".catalog__elem-glightbox"),index=parseInt(item.getAttribute("data-index"));lightImgs[index].dispatchEvent(eventClick)})})}},init:function init(){var _self=this;if(document.querySelectorAll(".card__list .card__elem-info").length)this.cardHeight();if(document.querySelectorAll(".js-search-icon").length)this.search();if(document.querySelectorAll(".js-ibanner").length)this.bannerCar();if(document.querySelectorAll(".js-iclients").length)this.clientsCar();if(document.querySelectorAll(".js-ireviews").length)this.reviewsCar();if(document.querySelectorAll(".js-iprojects").length)this.projectsCar();if(document.querySelectorAll(".js-inews-href").length)this.inewsToggler();if(document.querySelectorAll(".js-serv-checkbox").length)this.services();if(document.querySelectorAll(".js-page404-sticky").length)this.page404();if(document.querySelectorAll(".js-comparison-car").length)this.comparison();if(document.querySelectorAll(".js-burger").length)this.burger();if(document.querySelectorAll(".js-equipment").length)this.equipment();if(document.querySelectorAll(".js-stillage").length)this.stillage();if(document.querySelectorAll(".js-cardpage").length)this.cardPage();if(document.querySelectorAll(".js-catpage").length)this.catPage();if(document.querySelectorAll(".js-subcatpage").length)this.subcatPage();if(document.querySelectorAll(".js-model").length)this.modelBlock();if(document.querySelectorAll(".js-consult").length)this.consult();if(document.querySelectorAll(".js-recent").length)this.recentCar();if(document.querySelectorAll(".js-others").length)this.others();if(document.querySelectorAll(".js-reviews-star").length){var stars=document.querySelectorAll(".js-reviews-star");stars.forEach(function(star){star.addEventListener("click",function(){stars.forEach(function(star){return star.classList.remove("choosed")});_self.prevAll(star).forEach(function(elem){return elem.classList.add("choosed")});star.classList.add("choosed");document.querySelector(".js-reviews-starinput").value=star.getAttribute("data-star")})})}if(document.querySelectorAll(".js-checkfake").length){var checkFake=document.querySelectorAll(".js-checkfake");checkFake.forEach(function(item){item.addEventListener("click",function(){if(item.classList.contains("clicked"))item.nextElementSibling.removeAttribute("checked");else item.nextElementSibling.setAttribute("checked",true);item.classList.toggle("clicked")})})}if(document.querySelectorAll(".js-print").length){var printBtn=document.querySelectorAll(".js-print");printBtn.forEach(function(item){item.addEventListener("click",function(){return window.print()})})}if(document.querySelectorAll(".js-common-file").length){var commonFile=document.querySelectorAll(".js-common-fileinput"),commonFileDelete=document.querySelectorAll(".js-common-filedelete");commonFile.forEach(function(fileInp){fileInp.addEventListener("change",function(e){var el=fileInp.nextElementSibling,path=fileInp.value.split("\\"),pathName=path[path.length-1].split("");pathName.length>=20?pathName=pathName.slice(0,18).join("")+"...":pathName=pathName.join("");el.textContent=pathName;el.classList.add("choosed")})});commonFileDelete.forEach(function(fileDelete){fileDelete.addEventListener("click",function(e){var el=fileDelete.previousElementSibling,fileInput=fileDelete.previousElementSibling.previousElementSibling;el.textContent=el.getAttribute("data-default");fileInput.value="";el.classList.remove("choosed")})})}if(document.querySelectorAll(".js-scrollTo").length){var scrollTo=document.querySelectorAll(".js-scrollTo");scrollTo.forEach(function(item){item.addEventListener("click",function(){var dstData=item.getAttribute("data-to"),dstPx=document.querySelector("[data-scroll=\""+dstData+"\"]").getBoundingClientRect().top+document.body.scrollTop-document.querySelector("header").offsetHeight-20;window.animation.scrollTo(dstPx,800)})})}if(document.querySelectorAll(".js-totop").length){var toTop=document.querySelector(".js-totop");window.addEventListener("scroll",function(){if(window.scrollY>800)toTop.classList.add("visible");else toTop.classList.remove("visible")});toTop.addEventListener("click",function(){window.animation.scrollTo(0,800)})}if(document.querySelectorAll(".js-lightbox").length){var lightbox=GLightbox({"selector":"js-lightbox"})}if(document.querySelectorAll(".js-hidden").length){var _loop9=function _loop9(shower){shower.addEventListener("click",function(e){shower.previousElementSibling.classList.toggle("show");shower.classList.toggle("open");e.preventDefault()})};var _iteratorNormalCompletion22=true;var _didIteratorError22=false;var _iteratorError22=undefined;try{for(var _iterator22=document.querySelectorAll(".js-toggler")[Symbol.iterator](),_step22;!(_iteratorNormalCompletion22=(_step22=_iterator22.next()).done);_iteratorNormalCompletion22=true){var shower=_step22.value;_loop9(shower)}}catch(err){_didIteratorError22=true;_iteratorError22=err}finally{try{if(!_iteratorNormalCompletion22&&_iterator22.return){_iterator22.return()}}finally{if(_didIteratorError22){throw _iteratorError22}}}}if(document.querySelectorAll(".js-calc-open").length){var calcOpen=document.querySelector(".js-calc-open"),calcHidden=document.querySelector(".js-calc-hidden");calcOpen.addEventListener("click",function(){calcOpen.classList.toggle("open");calcHidden.classList.toggle("open")})}this.resizeWatcher();var eventResize=new Event("resize");window.dispatchEvent(eventResize);var eventScroll=new Event("scroll");window.dispatchEvent(eventScroll);$("[data-fancybox]").fancybox({i18n:{en:{CLOSE:"\u0417\u0430\u043A\u0440\u044B\u0442\u044C"}}});// jquery
return this}}.init()};