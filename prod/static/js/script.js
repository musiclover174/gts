'use strict';window.onload=function(){window.gts={};window.gts.form={init:function init(){var _th=this;$('.js-phone').mask('+7(999) 999-9999');$('form').submit(function(){if(!_th.checkForm($(this)))return false})},checkForm:function checkForm(form){var checkResult=true;form.find('.warning').removeClass('warning');form.find('input, textarea, select').each(function(){if($(this).data('req')){switch($(this).data('type')){case'tel':var re=/^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/im;if(!re.test($(this).val())){$(this).addClass('warning');checkResult=false}break;case'email':var re=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i;if(!re.test($(this).val())){$(this).addClass('warning');checkResult=false}break;default:if($.trim($(this).val())===''){$(this).addClass('warning');checkResult=false}break;}}});return checkResult}}.init();window.gts.main={cardHeight:function cardHeight(){var cardInfo=document.querySelectorAll('.card__elem-info'),cardParent=document.querySelector('.card__list'),elemsOnRow=void 0,maxH=void 0;function skippedAutoHeight(){document.querySelectorAll('.card__elem-info.skipped').forEach(function(elem){elem.style.height=maxH+'px';elem.classList.remove('skipped')});maxH=0}function autoHeight(){maxH=0;cardInfo.forEach(function(item,i){if(i%elemsOnRow===0)skippedAutoHeight();if(item.offsetHeight>maxH){maxH=item.offsetHeight}item.classList.add('skipped')});if(document.querySelectorAll('.card__elem-info.skipped').length)skippedAutoHeight()}window.addEventListener('resize',function(){cardInfo.forEach(function(elem){return elem.style.height='auto'});elemsOnRow=Math.floor(cardParent.offsetWidth/cardInfo[0].offsetWidth);autoHeight()})},search:function search(){var search=document.querySelector('.search'),searchIcon=document.querySelector('.js-search-icon'),searchClose=document.querySelector('.js-search-close'),searchInp=document.querySelector('.search__inp'),searchRes=document.querySelector('.js-search-res'),html=document.querySelector('html');searchIcon.addEventListener('click',function(e){search.classList.add('open');html.classList.add('burgeropen');e.preventDefault();e.stopPropagation()});searchClose.addEventListener('click',function(e){searchInp.value='';searchRes.classList.remove('open');search.classList.remove('open');html.classList.remove('burgeropen');e.preventDefault();e.stopPropagation()});searchInp.addEventListener('keyup',function(e){if(searchInp.value.trim()!=='')searchRes.classList.add('open');else searchRes.classList.remove('open')})},burger:function burger(){var burger=document.querySelector('.js-burger'),burgerShadow=document.querySelector('.js-burger-shadow');burger.addEventListener('click',function(e){document.querySelector('.burger__menu').classList.toggle('open');this.classList.toggle('open');document.querySelector('html').classList.toggle('burgeropen');e.preventDefault();e.stopPropagation()});burgerShadow.addEventListener('click',function(e){var event=new Event('click');burger.dispatchEvent(event);e.preventDefault();e.stopPropagation()})},bannerCar:function bannerCar(){var bannerSwiper=new Swiper('.js-ibanner',{loop:true,speed:800,navigation:{nextEl:'.js-ibanner .swiper-button-next',prevEl:'.js-ibanner .swiper-button-prev'},autoplay:{delay:5000}})},reviewsCar:function reviewsCar(){var reviewsSwiper=new Swiper('.js-ireviews',{loop:true,speed:800,navigation:{nextEl:'.js-ireviews ~ .swiper-buttons .swiper-button-next',prevEl:'.js-ireviews ~ .swiper-buttons .swiper-button-prev'},effect:'fade',autoHeight:true,fadeEffect:{crossFade:true},autoplay:{delay:5000}})},clientsCar:function clientsCar(){var projectsSwiper=new Swiper('.js-iclients',{loop:true,speed:800,slidesPerView:5,spaceBetween:26,navigation:{nextEl:'.js-iclients ~ .swiper-buttons .swiper-button-next',prevEl:'.js-iclients ~ .swiper-buttons .swiper-button-prev'},breakpoints:{700:{slidesPerView:2,spaceBetween:20},999:{slidesPerView:4,spaceBetween:20}}})},projectsCar:function projectsCar(){var projectsSwiper=new Swiper('.js-iprojects',{loop:true,speed:800,slidesPerView:3,spaceBetween:32,navigation:{nextEl:'.js-iprojects ~ .swiper-buttons .swiper-button-next',prevEl:'.js-iprojects ~ .swiper-buttons .swiper-button-prev'},breakpoints:{600:{slidesPerView:1,spaceBetween:10},999:{slidesPerView:2,spaceBetween:20}}})},inewsToggler:function inewsToggler(){document.querySelectorAll('.js-inews-href').forEach(function(item,i){item.addEventListener('click',function(e){if(item.classList.contains('active'))return false;var curActive=document.querySelector('.js-inews-href.active'),curAttr=curActive.getAttribute('data-type'),newAttr=item.getAttribute('data-type');curActive.classList.remove('active');item.classList.add('active');$('.i-news__type[data-type="'+curAttr+'"]').fadeOut(400,function(){$('.i-news__type[data-type="'+newAttr+'"]').fadeIn(400)});e.stopPropagation();e.preventDefault()})})},resizeWatcher:function resizeWatcher(){var tableSel=document.querySelectorAll('table'),scrollArray=[];if(tableSel.length){tableSel.forEach(function(item,i){var orgHtml=item.outerHTML;item.outerHTML='<div class=\'table-scroller'+i+'\'>'+orgHtml+'</div>';var ps=new PerfectScrollbar('.table-scroller'+i,{wheelPropagation:true});scrollArray.push(ps)});window.addEventListener('resize',function(){if(scrollArray.length)scrollArray.forEach(function(item,i){item.update()})})}},init:function init(){if(document.querySelectorAll('.card__elem-info').length)this.cardHeight();if(document.querySelectorAll('.js-search-icon').length)this.search();if(document.querySelectorAll('.js-ibanner').length)this.bannerCar();if(document.querySelectorAll('.js-iclients').length)this.clientsCar();if(document.querySelectorAll('.js-ireviews').length)this.reviewsCar();if(document.querySelectorAll('.js-iprojects').length)this.projectsCar();if(document.querySelectorAll('.js-inews-href').length)this.inewsToggler();if(document.querySelectorAll('.js-burger').length)this.burger();this.resizeWatcher();var eventResize=new Event('resize');window.dispatchEvent(eventResize)}}.init()};